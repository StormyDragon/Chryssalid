FROM cloud_build:latest

ENV \
    X_GOOGLE_CODE_LOCATION=/app \
    X_GOOGLE_ENTRY_POINT=hello \
    X_GOOGLE_SUPERVISOR_HOSTNAME=192.168.86.101 \
    X_GOOGLE_SUPERVISOR_INTERNAL_PORT=8080 \
    X_GOOGLE_FUNCTION_TRIGGER_TYPE=HTTP_TRIGGER \
    X_GOOGLE_FUNCTION_TIMEOUT_SEC=60 \
    X_GOOGLE_WORKER_PORT=80

ENTRYPOINT ["/usr/bin/env"]
CMD ["node", "/tmp/cloud_worker/worker.js"]

